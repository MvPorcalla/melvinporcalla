<html lang="en">
<head>
  <!-- Charset & Compatibility -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Title & Meta Description -->
  <title>Melvin Porcalla | Web Developer</title>
  <meta name="description" content="Portfolio of Melvin Porcalla, a Web Developer crafting responsive websites and user-friendly interfaces.">
  <meta name="author" content="Melvin Porcalla">

  <!-- Favicon -->
  <link rel="icon" href="./assets/images/favicon_io/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="icon" href="./assets/images/favicon_io/favicon.ico" sizes="any">
  <link rel="icon" href="./assets/images/favicon_io/favicon.svg" type="image/svg+xml">

  <link rel="apple-touch-icon" href="./assets/images/favicon_io/apple-touch-icon.png">
  <link rel="manifest" href="./assets/images/favicon_io/site.webmanifest">

  <!-- Preconnect & DNS Prefetch -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Melvin Porcalla | Frontend Developer">
  <meta property="og:description" content="Explore my projects and see how I bring ideas to life through modern web design.">
  <meta property="og:image" content="./assets/images/preview.jpg">  <!-- add preview image on the assets/images -->
  <meta property="og:url" content="https://mvporcalla.github.io/melvinporcalla/">
  <meta property="og:type" content="website">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Melvin Porcalla | Frontend Developer">
  <meta name="twitter:description" content="Frontend Developer portfolio of Melvin Porcalla. View UI/UX web projects built with modern tools like Vue.js.">
  <meta name="twitter:image" content="./assets/images/preview.jpg">

  <!-- Bootstrap & Boxicons CSS (via CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">

  <!-- Main Custom Styles -->
  <link rel="stylesheet" href="./assets/css/utilities.css">
  <link rel="stylesheet" href="./assets/css/components.css">
  <link rel="stylesheet" href="./assets/css/sidebar.css">
  <link rel="stylesheet" href="./assets/css/main.css">


  <!-- temporary css file -->
  <link rel="stylesheet" href="./profile-grid.css">

</head>

<style>

  .box-border {
    /* background-color: #2d2d2d; */
    border: 2px solid #2d2d2d;
  }

  body.freeze-scroll {
    overflow-y: hidden;
    height: 100dvh; /* Prevent mobile scrolling */
  }

  .expandable-box {
    transition: all 0.5s ease;
    cursor: pointer;
    position: relative;
    z-index: 1;
  }

  /* Text overlay on hover */
  .expandable-box::after {
    position: absolute;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.6);
    color: #fff;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    border-radius: 0.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    white-space: nowrap;
  }

  /* Show on hover */
  .expandable-box:hover::after {
    opacity: 1;
    content: attr(data-hovertext);
  }

  /* When expanded */
  .fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100dvh;
    background: #2d2d2d;
    z-index: 9999;
    overflow-y: auto;
    padding: 2rem;
    animation: fadeIn 0.4s ease-in-out;
  }

  .fullscreen-inner {
    max-width: 900px;       /* Set your desired width */
    margin: 0 auto;         /* Centers horizontally */
    padding: 2rem 1.5rem;   /* Add some spacing */
  }

  /* Optional: Hide other content */
  .profile-grid.expanded .profile-left,
  .profile-grid.expanded .profile-right {
    visibility: hidden;
  }

  .profile-grid.expanded .fullscreen {
    visibility: visible;
    z-index: 10000;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @media (max-width: 992px) {
  .expandable-box::after {
    display: none !important;
  }
}



/* Skill Icons (Grid View) */
.skills-preview {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
  gap: 0.5rem;
  justify-items: center;
  align-items: center;
  margin-top: 1rem;
}

/* Icon Box */
.tech-icon {
  width: 64px;
  height: 64px;
  padding: 12px;
}

.tech-icon > i,
.tech-icon > img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}


.expandable-box .box-detail {
  display: none;
}

.expandable-box.fullscreen .box-preview {
  display: none;
}

.expandable-box.fullscreen .box-detail {
  display: block;
}


</style>

<body>
  
  <div id="preloader" class="preloader d-flex justify-content-center align-items-center min-vh-100 mvp-bg-base position-fixed top-0 start-0 w-100 z-3">
      <div class="spinner-border util-text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
      </div>
  </div>

  <nav class="sidenavbar">
    <ul class="navbar-nav">

      <li class="logo">
        <a href="#" class="nav-link">
          <span class="link-text">Melvin.</span>
          <img src="./assets/images/favicon_io/android-chrome-512x512.png" alt="icon" class="logo-img">
        </a>
      </li>

      <li class="nav-item">
        <a href="#profile" class="nav-link">
          <i class="bx bx-user fa-icon"></i>
          <span class="link-text">Profile</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#portfolio" class="nav-link">
          <i class="bx bx-folder-open fa-icon"></i>
          <span class="link-text">Portfolio</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#service" class="nav-link">
          <i class="bx bx-briefcase fa-icon"></i>
          <span class="link-text">Service</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="#contacts" class="nav-link">
          <i class="bx bx-message-dots fa-icon"></i>
          <span class="link-text">Contacts</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="https://github.com/MvPorcalla" target="_blank" class="nav-link">
          <i class="bx bxl-github fa-icon"></i>
          <span class="link-text">GitHub</span>
        </a>
      </li>

    </ul>
  </nav>

  <main>
    <!-- Theme Toggle Button -->
    <div class="Theme-toggle">
      <button id="themeToggle" aria-label="Toggle theme" aria-pressed="true">
        <i class='bx bx-sun'></i>
      </button>
    </div>

    <!-- ================ PROFILE SECTION ================ -->
    <section class="profile section-full" id="profile">
      <div class="container-fluid px-0">
        <div class="profile-grid">

          <div class="profile-left">

            <div class="box box-border profile-info profile-order-info">
              <h4>Profile</h4>

              <p class="mb-0">Lorem ipsum, dolor sit amet consectetur adipisicing elit. 
                Sequi quia obcaecati aperiam ad sapiente dolore nulla voluptates tempora accusantium quos, 
                maiores omnis quisquam? Vero quaerat molestias reprehenderit in eveniet sunt.
              </p>
            </div>

            <div class="profile-stats d-flex gap-1 profile-order-stats">
              <div class="box flex-fill d-flex align-items-center justify-content-center">
                <img 
                  loading="lazy"
                  src="https://github-readme-stats.vercel.app/api?username=mvporcalla&show_icons=true&theme=radical&count_private=true&include_all_commits=true" 
                  alt="Melvin's GitHub Stats" 
                  class="stats-img img-fluid" />
              </div>

              <div class="box flex-fill d-flex align-items-center justify-content-center">
                <img 
                  loading="lazy"
                  src="https://github-readme-stats.vercel.app/api/top-langs/?username=mvporcalla&layout=compact&theme=radical" 
                  alt="Top Languages" 
                  class="stats-img img-fluid" />
              </div>
            </div>

          </div>

          <div class="profile-right">

          <div class="box box-border profile-experience profile-order-experience expandable-box" data-hovertext="Click to show more">
            <div class="fullscreen-inner container">
              <h4>Experience</h4>

              <p>
                <strong>Pixel8 Web Solutions and Consultancy Inc.</strong> | February 2024 - May 2024<br>
                Gained proficiency in Git commands, Vue.js, and Quasar during onboarding. 
                Facilitated smooth onboarding for new interns as QA, troubleshooting their progress and providing 
                support for successful knowledge transfer. 
                Developed and optimized responsive web system UIs using Vue.js, Quasar, and JavaScript. 
                Collaborated closely with the UI/UX team to address and resolve discrepancies between designs and 
                functionality. 
                Participated in daily meetings to discuss progress, identify issues, and ensure alignment with team goals 
                and timelines.
              </p>
            </div>
          </div>

            <div class="box box-border profile-skills profile-order-skills expandable-box" id="skillsBox" data-hovertext="Click to show more">
              <div class="box-preview">
                <!-- summary or icon/title -->
                <h3>Technology Stacks:</h3>
              </div>
              <div class="skills-detail d-none mt-4" id="skillsDetail">
                <div class="fullscreen-inner container">
                  <div class="row" id="skillsRow">
                    <!-- JS will inject skills here -->
                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>

      </div>
    </section>

    <!-- ================ PORTFOLIO SECTION ================ -->
    <section class="portfolio section-full bg-warning" id="portfolio">
      <div class="container-fluid">
          <div class="row">

            <h1>Portfolio</h1>

          </div>
      </div>
    </section>

        <!-- ================ SERVICE SECTION ================ -->
    <section class="service section-full bg-success" id="service">
      <div class="container-fluid">
          <div class="row">

            <h1>SERVICE</h1>

          </div>
      </div>
    </section>

        <!-- ================ CONTACT SECTION ================ -->
    <section class="contacts section-full bg-primary" id="contacts">
      <div class="container-fluid">
          <div class="row">

            <h1>Contacts</h1>

          </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="text-center py-3">
      <div class="container">
          <p class="m-0">&copy; 2025 Melvin Porcalla Portfolio. All rights reserved.</p>
      </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous" defer></script>

  <script src="./js/scripts.js" defer></script>
  <script src="./techStack.js" defer></script>   <!-- temporary path -->

  <script>
    let grid;
    let lastFocusedEl;

    function clearFullscreen() {
      document.querySelectorAll(".expandable-box.fullscreen").forEach((b) => {
        b.classList.remove("fullscreen");
        if (typeof b._removeFocusTrap === "function") {
          b._removeFocusTrap();
          delete b._removeFocusTrap;
        }

        b.setAttribute("data-hovertext", "Click to show more");
        b.removeAttribute("role");
        b.removeAttribute("aria-modal");
        b.removeAttribute("tabindex");
      });

      grid?.classList.remove("expanded");
      document.body.classList.remove("freeze-scroll");

      document.querySelectorAll(".skills-detail").forEach((d) => {
        d.classList.add("d-none");
      });

      // 👇 Restore focus after closing
      if (lastFocusedEl && typeof lastFocusedEl.focus === "function") {
        lastFocusedEl.focus();
        lastFocusedEl = null; // clear it after use
      }
    }


    function setupFocusTrap(modal) {
      const focusableSelectors = 'a, button, textarea, input, select, [tabindex]:not([tabindex="-1"])';
      const focusableElements = modal.querySelectorAll(focusableSelectors);

      // Exit early if no focusable elements
      if (focusableElements.length === 0) return;

      const first = focusableElements[0];
      const last = focusableElements[focusableElements.length - 1];

      function trap(e) {
        if (e.key === "Tab") {
          if (e.shiftKey) {
            if (document.activeElement === first) {
              e.preventDefault();
              last.focus();
            }
          } else {
            if (document.activeElement === last) {
              e.preventDefault();
              first.focus();
            }
          }
        }
      }

      modal.addEventListener("keydown", trap);

      // Optional: remove listener when modal is closed
      modal._removeFocusTrap = () => modal.removeEventListener("keydown", trap);
    }

    function setupExpandableBoxes() {
      const boxes = document.querySelectorAll(".expandable-box");
      grid = document.querySelector(".profile-grid") || null;

      boxes.forEach((box) => {
        const newBox = box.cloneNode(true);
        box.replaceWith(newBox);
      });

      const freshBoxes = document.querySelectorAll(".expandable-box");

      freshBoxes.forEach((box) => {
        box.onclick = () => {
          const isLargeScreen = window.innerWidth >= 993;
          if (!isLargeScreen) return;

          // Save the element that triggered the expansion
          lastFocusedEl = document.activeElement;

          const isFullscreen = box.classList.contains("fullscreen");

          clearFullscreen();

          if (!isFullscreen) {
            box.classList.add("fullscreen");
            // Show .skills-detail if it exists
            const details = box.querySelector(".skills-detail");
            if (details) {
              details.classList.remove("d-none");
            }

            grid?.classList.add("expanded");

            box.setAttribute("data-hovertext", "Click to close");
            document.body.classList.add("freeze-scroll");

            // Accessibility
            box.setAttribute("role", "dialog");
            box.setAttribute("aria-modal", "true");
            box.setAttribute("tabindex", "-1");
            box.focus();

            // 🔐 Focus trap
            setupFocusTrap(box);

          }
        };
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      setupExpandableBoxes();
    });

    // 🧼 Debounced resize
    let resizeTimeout;
    let wasLargeScreen = window.innerWidth >= 993;

    window.addEventListener("resize", () => {
      clearTimeout(resizeTimeout);

      resizeTimeout = setTimeout(() => {
        const isNowLargeScreen = window.innerWidth >= 993;

        // Only re-run setup if we crossed the threshold
        if (isNowLargeScreen !== wasLargeScreen) {
          wasLargeScreen = isNowLargeScreen;
          setupExpandableBoxes();
        }
      }, 200);
    });

    document.addEventListener("keydown", function (e) {
      if (e.key === "Escape") {
        clearFullscreen();
      }
    });
  </script>


</body>
</html>